"use strict";var t=require("react/jsx-runtime"),e=require("react"),r=Object.prototype.hasOwnProperty;function i(t,e,r){for(r of t.keys())if(n(r,e))return r}function n(t,e){var o,a,u;if(t===e)return!0;if(t&&e&&(o=t.constructor)===e.constructor){if(o===Date)return t.getTime()===e.getTime();if(o===RegExp)return t.toString()===e.toString();if(o===Array){if((a=t.length)===e.length)for(;a--&&n(t[a],e[a]););return-1===a}if(o===Set){if(t.size!==e.size)return!1;for(a of t){if((u=a)&&"object"==typeof u&&!(u=i(e,u)))return!1;if(!e.has(u))return!1}return!0}if(o===Map){if(t.size!==e.size)return!1;for(a of t){if((u=a[0])&&"object"==typeof u&&!(u=i(e,u)))return!1;if(!n(a[1],e.get(u)))return!1}return!0}if(o===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(o===DataView){if((a=t.byteLength)===e.byteLength)for(;a--&&t.getInt8(a)===e.getInt8(a););return-1===a}if(ArrayBuffer.isView(t)){if((a=t.byteLength)===e.byteLength)for(;a--&&t[a]===e[a];);return-1===a}if(!o||"object"==typeof t){for(o in a=0,t){if(r.call(t,o)&&++a&&!r.call(e,o))return!1;if(!(o in e)||!n(t[o],e[o]))return!1}return Object.keys(e).length===a}}return t!=t&&e!=e}var o=1e3,a=function(t,r,i,a){var u,h,s,c,f=e.useState({headerHeight:0,footerHeight:0,showFromIndex:0,showToIndex:t.length-1}),g=f[0],d=f[1],l=e.useRef(0);return u=function(){var e=function(){if(i.current&&a.current){var e=function(t,e,r,i){var n=0,a=0,u=0,h=0,s=t.length-1,c=r.getBoundingClientRect(),f=i.getBoundingClientRect().top-c.top,g=r.clientHeight,d=-1e3,l=g+o;return t.forEach((function(t,r){var i=t.height+e,o=f+n;d>o+i?(a+=i,h=r+1):l>o?s=r:u+=i,n+=i})),{headerHeight:a,footerHeight:u,showFromIndex:h,showToIndex:s}}(t,r,i.current,a.current);d(e),l.current=i.current.scrollTop}},n=function(){if(i.current){var t=l.current,r=i.current.scrollTop;Math.abs(t-r)>o&&e()}};e();var u=i.current;return null==u||u.addEventListener("scroll",n),function(){null==u||u.removeEventListener("scroll",n)}},h=[t.map((function(t){return t.height})),r,i,a],s=e.useRef(!0),c=e.useRef(h),e.useEffect(u,[function(t){var e=c.current;return c.current=t,n(t,e)||(s.current=!s.current),s.current}(h)]),g},u=function(e){var r=e.items,i=e.itemRenderer,n=e.gap,o=void 0===n?0:n,u=e.scrollRef,h=e.containerRef,s=a(r,o,u,h),c=s.headerHeight,f=s.footerHeight,g=s.showFromIndex,d=s.showToIndex;return t.jsxs(t.Fragment,{children:[c?t.jsx("div",{style:{height:c}}):null,r.map((function(t,e){return e<g||e>d?null:i({item:t,index:e})})),f?t.jsx("div",{style:{height:f}}):null]})};"function"==typeof SuppressedError&&SuppressedError;var h=function(t){return t.width/t.height},s=function(t,e,r){var i=t;return"number"==typeof r&&(i=Math.min(i,r)),i=Math.max(i,e)},c=function(t){var r,i,o,a;return r=function(){return new f(t).fillRows()},i=[t],o=e.useRef(!0),a=e.useRef(i),e.useMemo(r,[function(t){var e=a.current;return a.current=t,n(t,e)||(o.current=!o.current),o.current}(i)])},f=function(){function t(t){var e=t.items,r=t.containerWidth,i=t.gap,n=t.rowHeightRange,o=t.itemRatioRange,a=t.maxColumns,u=t.enableCrop,h=t.preserveAspectRatio;if(this.rows=[],e.some((function(t){return void 0===t.width||void 0===t.height})))throw new Error("Items should have 'width' and 'height' properties");if(this._items=e,r<0)throw new Error("Container width should be positive");this.containerWidth=r;if(i&&i<0)throw new Error("Gap should be positive");this.gap=i||0;if(n){if(n.min<0||n.max<0)throw new Error("Row height range should be positive");if(n.max<n.min)throw new Error("Row height range minimum should be less than maximum")}this.rowHeightRange=n||{min:240,max:340};if(o){if(o.min<0||o.max<0)throw new Error("Item ratio range should be positive");if(o.max<o.min)throw new Error("Item ratio range minimum shold be less than maximum")}if(this.itemRatioRange=!h&&o?o:{min:0,max:1e6},void 0!==a&&a<=0)throw new Error("maxColumns should be greater than 0");this.maxColumns=a,this.enableCrop=u,this.preserveAspectRatio=h}return t.prototype.addRow=function(t){this.rows.push(t)},t.prototype.fillRows=function(){var t=this;return this._items.forEach((function(e){var r=t.rows[t.rows.length-1];if(!r){var i=new g(t);t.addRow(i),r=i}0===r.columns?r.addItem(e):r.canAddItem(e)?r.addItem(e):(r.adjust(),(i=new g(t)).addItem(e),t.addRow(i))})),this.rows},t}(),g=function(){function t(t){this.items=[],this._grid=t}return Object.defineProperty(t.prototype,"isLast",{get:function(){return this._grid.rows[this._grid.rows.length-1]===this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemRatioRange",{get:function(){return this._grid.itemRatioRange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._grid.containerWidth-Math.max(this.columns-1,0)*this._grid.gap},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 0===this.columns?0:this.width/this.ratio},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ratio",{get:function(){var t=this.items.map((function(t){return t.ratio})).reduce((function(t,e){return t+e}),0);return this.isLast?s(t,this.ratioRange.min):t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ratioRange",{get:function(){var t=this.width;return{min:t/this._grid.rowHeightRange.max,max:t/this._grid.rowHeightRange.min}},enumerable:!1,configurable:!0}),t.prototype.addItem=function(t){this.items.push(new d(t,this))},t.prototype.canAddItem=function(t){var e=this.clone(this._grid);e.addItem(t);var r=e.ratioRange.max,i=e.ratio<=r,n=!this._grid.maxColumns||this._grid.maxColumns>=e.columns;return i&&n},t.prototype.clone=function(e){var r=new t(e);return r.items=this.items.map((function(t){return t.clone(r)})),r},t.prototype.adjust=function(){if(!this._grid.preserveAspectRatio){var t=this.ratio,e=this.ratioRange;if(t<e.min){var r=e.min-t,i=function(t,e,r){if(r||2===arguments.length)for(var i,n=0,o=e.length;n<o;n++)!i&&n in e||(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}([],this.items,!0);i.sort((function(t,e){return t.ratio-e.ratio}));var n=i[0];n&&(n.ratio+=r)}else if(t>e.max){
//!IMPORTANT
var o=(r=e.max-t)/this.columns;this.items.forEach((function(t){t.ratio+=o}))}}},t}(),d=function(){function t(t,e){this.content=t,this._row=e,this._ratio=s(h(t),this.ratioRange.min,this.ratioRange.max)}return Object.defineProperty(t.prototype,"ratioRange",{get:function(){return this._row.itemRatioRange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ratio",{get:function(){return this._ratio},set:function(t){this._ratio=s(t,this.ratioRange.min,this.ratioRange.max)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalRatio",{get:function(){return h(this.content)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var t=this._row.height;return{width:this.ratio*t,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cropBox",{get:function(){return t=this.size,e=this.content,r=h(t),i=h(e),n={width:e.width,height:e.height,left:0,top:0},r>i?(n.width=t.width,n.height=t.width/i):(n.width=t.height*i,n.height=t.height),n.left=-Math.abs(t.width-n.width)/2,n.top=-Math.abs(t.height-n.height)/2,n;var t,e,r,i,n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fitBox",{get:function(){return t=this.size,e=this.content,r=h(t),i=h(e),n={width:e.width,height:e.height,left:0,top:0},r<i?(n.width=t.width,n.height=t.width/i):(n.width=t.height*i,n.height=t.height),n.left=Math.abs(t.width-n.width)/2,n.top=Math.abs(t.height-n.height)/2,n;var t,e,r,i,n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"aspectRatioPreserved",{get:function(){return this.originalRatio===this.ratio},enumerable:!1,configurable:!0}),t.prototype.clone=function(e){return new t(this.content,e)},t}();exports.Gallery=function(r){var i=r.items,n=r.itemRenderer,o=r.keyExtractor,a=r.gap,h=void 0===a?0:a,s=r.rowHeightRange,f=r.itemRatioRange,g=r.maxColumns,d=r.preserveAspectRatio,l=r.scrollRef,m=function(){var t=e.useRef(null),r=e.useState({width:0,height:0}),i=r[0],n=r[1];return e.useLayoutEffect((function(){var e=function(){var e=t.current;if(e){var r=e.getBoundingClientRect();n((function(t){return t.width===r.width&&t.height===r.height?t:{width:r.width,height:r.height}}))}};e();var r=new MutationObserver(e);return t.current&&r.observe(t.current,{childList:!0,subtree:!0,attributes:!0}),window.addEventListener("resize",e),function(){r.disconnect(),window.removeEventListener("resize",e)}}),[]),{measureRef:t,size:i}}(),p=m.measureRef,w=m.size.width||500,v=c({items:i,containerWidth:w,gap:h,rowHeightRange:s,itemRatioRange:f,maxColumns:g,preserveAspectRatio:d}),b=function(e,r){var i={display:"flex",flexDirection:"row",gap:h,height:e.height};return t.jsx("div",{style:i,children:e.items.map((function(e,r){var i=e.size,a=o?o(e.content,r):r;return t.jsx("div",{style:i,children:n({index:r,item:e.content,size:e.size,cropBox:e.cropBox,fitBox:e.fitBox,aspectRatioPreserved:e.aspectRatioPreserved})},a)}))},r)},y={display:"flex",flexDirection:"column",width:"100%",gap:h},R=!!l;return t.jsx("div",{ref:p,style:y,children:R?t.jsx(u,{scrollRef:l,items:v,gap:h,containerRef:p,itemRenderer:function(t){var e=t.item,r=t.index;return b(e,r)}}):t.jsx(t.Fragment,{children:v.map(b)})})},exports.Virtualizer=u;
//# sourceMappingURL=index.js.map
